{% extends 'inventory/reports_pdf/base_pdf.html' %}
{% load inventory_extras %}

{% block content %}
    <table>
        <thead>
            <tr>
                <th style="width: 12%;">N° Facture</th>
                <th style="width: 18%;">Client</th>
                <th style="width: 10%;">Date</th>
                <th style="width: 10%;">Échéance</th>
                <th style="width: 12%;">Statut</th>
                <th class="text-right" style="width: 14%;">Montant</th>
                <th class="text-right" style="width: 14%;">Solde</th>
            </tr>
        </thead>
        <tbody>
            {% for invoice in invoices %}
                <tr class="{% cycle '' 'row-even' %}">
                    <td class="font-bold">{{ invoice.invoice_number }}</td>
                    <td>{{ invoice.client_name }}</td>
                    <td>{{ invoice.date_issued|date:"d/m/Y" }}</td>
                    <td>{{ invoice.date_due|date:"d/m/Y" }}</td>
                    <td>
                        <span class="badge {% if invoice.status == 'paid' %}badge-light-success{% elif invoice.status == 'partial' %}badge-light-primary{% else %}badge-light-warning{% endif %}">
                            {{ invoice.status_display }}
                        </span>
                    </td>
                    <td class="text-right text-muted">{{ invoice.total_amount|format_currency:company_settings.currency }}</td>
                    <td class="text-right text-primary font-bold">{{ invoice.remaining_amount|format_currency:company_settings.currency }}</td>
                </tr>
            {% empty %}
                <tr>
                    <td colspan="7" class="text-center text-muted" style="padding: 40px;">Aucune facture trouvée.</td>
                </tr>
            {% endfor %}
        </tbody>
        <tfoot>
            <tr style="background-color: #F4F6FA; font-weight: bold;">
                <td colspan="5" class="text-right" style="padding: 10px;">TOTAL GÉNÉRAL</td>
                <td class="text-right text-muted" style="padding: 10px;">{{ total_amount_sum|format_currency:company_settings.currency }}</td>
                <td class="text-right text-primary" style="padding: 10px; font-size: 10pt;">{{ total_remaining_sum|format_currency:company_settings.currency }}</td>
            </tr>
        </tfoot>
    </table>
{% endblock %}
